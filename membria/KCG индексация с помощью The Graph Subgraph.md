---
icon: graph
label: KCG индексация
---

# KCG индексация с помощью The Graph Subgraph

Для достижения децентрализованной, масштабируемой и производительной индексации Графа Кэша Знаний (KCG), мы предлагаем использовать архитектуру **The Graph Subgraph** как альтернативу централизованным графовым базам данных, таким как Neo4j.

## Слой хранения: Arweave

* Все записи KCG (сущности, отношения, онтологии) хранятся как неизменяемые документы JSON-LD на Arweave.
* Каждая запись идентифицируется своим TXID и обогащена метаданными тегов (например, `Type`, `Relation`, `Ontology`).

## Слой индексации и запросов: The Graph Subgraph

* Создается пользовательское отображение Subgraph для анализа транзакций Arweave на основе соответствующих тегов.
* Скрипт отображения извлекает данные о сущностях и отношениях из полезной нагрузки JSON-LD.
* Сущности Subgraph включают:

  * **KCGEntity:** id, type, attributes.
  * **KCGRelation:** source, target, relationType, context.
* Отношения поддерживаются через ссылки с адресацией по содержимому (TXID Arweave).

## Интерфейс GraphQL API

* Subgraph предоставляет стандартизированный GraphQL API для запросов к KCG.
* Пример запроса:

  ```graphql
  query {
    kcgEntities(where: {type: "Person"}) {
      id
      attributes { key, value }
      relations { target { id }, relationType }
    }
  }
  ```
* Это позволяет малым языковым моделям и агентам DoD эффективно выполнять семантические поиски.

## Поток синхронизации и обновления

* Индексаторы The Graph непрерывно отслеживают Arweave на наличие новых транзакций, соответствующих шаблонам KCG.
* Обновления графа знаний отражаются в реальном времени в индексе Subgraph.

## Преимущества перед централизованными графовыми базами данных

| Аспект                  | The Graph Subgraph                      | Neo4j                                    |
| ----------------------- | --------------------------------------- | ---------------------------------------- |
| Индексация неизменяемых данных | Нативная поддержка источников данных Arweave | Требует ручной синхронизации          |
| Интерфейс запросов         | Децентрализованный GraphQL API               | Проприетарный запрос Cypher                 |
| Масштабируемость             | Распределенная сеть индексаторов             | Требует федеративного пользовательского развертывания     |
| Децентрализация        | Да (размещенные или децентрализованные подграфы) | Нет (централизованная, если не настроена федерация) |
| Скорость доступа         | Низкая задержка для индексированных запросов         | Быстрая на выделенной инфраструктуре         |
| Соответствие стандартам    | Схема OpenGraphQL, интеграция с Arweave | Проприетарный формат базы данных              |

## Архитектура

* **Неизменяемое хранилище:** Arweave для постоянного хранения знаний.
* **Децентрализованная индексация и запросы:** The Graph Subgraph для эффективного поиска и извлечения.
* **Слой потребления:** Малые языковые модели и агенты DoD взаимодействуют через GraphQL.
* **Опциональное кэширование:** Шлюзы могут реализовать кэширование для сверхнизкой задержки.

Этот подход обеспечивает полностью децентрализованное, масштабируемое и производительное решение для индексации знаний, соответствующее принципам KCG+CAG: открытости, постоянства и эффективности.
